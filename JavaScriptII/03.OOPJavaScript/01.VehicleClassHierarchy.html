<!--Write a hierarchy of classes to simulate vehicles

☻1☻All vehicles should have speed and propulsion units 
    (things which make them move) and a Accelerate method,
     which should update their speed by summing it with the
     acceleration of their propulsion units
☻2☻Each propulsion unit can produce acceleration 
    (change in speed). There should be three types 
    of propulsion units - wheels, propelling nozzles
     and propellers
☻3☻A wheel should have a radius and the acceleration it 
    produces should be equal to its perimeter
☻4☻A propelling nozzle should have power and an afterburner
     switch. The acceleration the nozzle should produce as 
    much acceleration as it has power, but if the afterburner
     is on it should produce double acceleration.
☻5☻A propeller should have a number of fins and a spin direction.
     The acceleration a propeller produces should by default be 
    equal to the number of fins it has. The spin direction should
     be clockwise and counter-clockwise. If the spin direction is 
    counter-clockwise, the acceleration the propeller produces 
    should be negative, if the spin direction is clockwise,
     the acceleration should be positive.
☻6☻There should be land, air and water vehicles. Land vehicles 
    should have 4 wheels, air vehicles should have 1 propelling
     nozzles and water vehicles should have a customizable number
     of propellers (passed in the constructor). 
☻7☻Air vehicles should have the ability to switch on/off their afterburners.
☻8☻Water vehicles should have the ability to change the spin direction of their propellers.
☻9☻Implement one additional amphibious vehicle. It should both have a propeller 
    (so it can move on water) and wheels (so it can move on land). The amphibious 
    vehicle should be able to switch between land and water mode and it's speed
     property and Accelerate method should respectively depend on its wheels in 
    the first case and on its propeller in the second case-->
<!DOCTYPE html>
<html>
    <head>
        <title>Vehicle Class Hierarchy</title>    
        <!--TODO - extract javascript-->
    </head>
    <body>

        <div id="wrapper">
             Please check the console for tests!
        </div> 

        <script>
            var vehicleNS = (function () { //Namespase Vehicle

                Function.prototype.inherit = function (parent) {
                    this.prototype = new parent();
                    this.prototype.constructor = parent;
                }

                /*☻1☻All vehicles should have speed and propulsion units 
                     things which make them move) and a Accelerate method,
                     which should update their speed by summing it with the
                     acceleration of their propulsion units*/
                function Vehicle(speed, propulsionUnits) {
                    this.speed = speed;
                    this.propulsionUnits = propulsionUnits;
                }

                Vehicle.prototype.getAcceleration = function () {
                    for (var i = 0; i < this.propulsionUnits.length; i++) {
                        this.speed = this.speed + this.propulsionUnits[i].getAcceleration();
                    }
                }

                /*☻2☻Each propulsion unit can produce acceleration 
                     (change in speed). There should be three types 
                     of propulsion units - wheels, propelling nozzles
                     and propellers*/
                function PropulsionUnit() {
                }

                /*☻3☻A wheel should have a radius and the acceleration it 
                     produces should be equal to its perimeter*/
                function Wheel(radius) {
                    this.radius = radius;
                    PropulsionUnit.apply(this, arguments);
                }

                Wheel.inherit(PropulsionUnit);

                Wheel.prototype.getAcceleration = function () {
                    return 2 * Math.PI * this.radius;
                }

                /*☻4☻A propelling nozzle should have power and an afterburner
                     switch. The acceleration the nozzle should produce as 
                     much acceleration as it has power, but if the afterburner
                     is on it should produce double acceleration.*/
                function PropellingNozzle(power, isAfterburnerSwitchOn) {
                    this.power = power;
                    this.isAfterburnerSwitchOn = isAfterburnerSwitchOn;
                }

                PropellingNozzle.inherit(PropulsionUnit);

                PropellingNozzle.prototype.getAcceleration = function () {
                    if (this.isAfterburnerSwitchOn) {
                        return this.power * 2;
                    }
                    else {
                        return this.power;
                    }
                }

                /*☻5☻A propeller should have a number of fins and a spin direction.
                      The acceleration a propeller produces should by default be 
                     equal to the number of fins it has. The spin direction should
                      be clockwise and counter-clockwise. If the spin direction is 
                     counter-clockwise, the acceleration the propeller produces 
                     should be negative, if the spin direction is clockwise,
                      the acceleration should be positive.*/

                function Propeler(numberOfFins, isSpinDirectionClockwise) {
                    this.numberOfFins = numberOfFins;
                    this.isSpinDirectionClockwise = isSpinDirectionClockwise;
                }

                Propeler.inherit(PropulsionUnit);

                Propeler.prototype.getAcceleration = function () {
                    if (this.isSpinDirectionClockwise) {
                        return this.numberOfFins;
                    }
                    else {
                        return this.numberOfFins;
                    }
                }

                /*☻6☻There should be land, air and water vehicles. Land vehicles 
                        should have 4 wheels, air vehicles should have 1 propelling
                         nozzles and water vehicles should have a customizable number
                         of propellers (passed in the constructor).*/
                function LandVehicle(speed, propulsionUnits) {
                    if (propulsionUnits.length != 4) {
                        throw Error("The propulsionUnits array must contain only 4 wheels!");
                    }
                    for (var i = 0; i < propulsionUnits.length; i++) {
                        if (!(propulsionUnits[i] instanceof Wheel)) {
                            throw Error("The propulsionUnits array must contain only wheels!");
                        }
                    }
                    Vehicle.apply(this, arguments);
                }

                LandVehicle.inherit(Vehicle);

                /*☻7☻Air vehicles should have the ability to switch on/off their afterburners.*/
                function AirVehicle(speed, propulsionUnits) {
                    if (propulsionUnits.length == 1 && (propulsionUnits[0] instanceof PropellingNozzle)) {
                        Vehicle.apply(this, arguments);
                    }
                    else {
                        throw Error("The propulsionUnits array must contain only 1 propelling nozzle");
                    }
                }

                AirVehicle.inherit(Vehicle);

                AirVehicle.prototype.switchAfterburnerOn = function () {
                    this.propulsionUnits[0].isAfterburnerSwitchOn = true;
                }

                AirVehicle.prototype.switchAfterburnerOf = function () {
                    this.propulsionUnits[0].isAfterburnerSwitchOn = false;
                }

                /*☻8☻Water vehicles should have the ability to change the spin direction 
                of their propellers.*/

                function WaterVehicle(speed, propulsionUnits, numberOfPropelers) {
                    if (propulsionUnits.length != numberOfPropelers) {
                        throw Error("The propulsionUnits array lenght doesn't correspond to the number of propelers!");
                    }
                    for (var i = 0; i < propulsionUnits.length; i++) {
                        if (!(propulsionUnits[i] instanceof Propeler)) {
                            throw Error("The propulsionUnits array must contain only propellers!");
                        }
                    }
                    Vehicle.apply(this, arguments);
                }

                WaterVehicle.inherit(Vehicle);

                WaterVehicle.prototype.setSpinDirectionToClockwise = function () {
                    for (var i = 0; i < this.propulsionUnits.length; i++) {
                        this.propulsionUnits[i].isSpinDirectionClockwise = true;
                    }
                }

                WaterVehicle.prototype.setSpinDirectionToCounterClockwise = function () {
                    for (var i = 0; i < this.propulsionUnits.length; i++) {
                        this.propulsionUnits[i].isSpinDirectionClockwise = false;
                    }
                }

                /*☻9☻Implement one additional amphibious vehicle. It should both have a propeller 
                     (so it can move on water) and wheels (so it can move on land). The amphibious 
                     vehicle should be able to switch between land and water mode and it's speed
                      property and Accelerate method should respectively depend on its wheels in 
                     the first case and on its propeller in the second case*/
                function AmphibiousVehicle(speed, propulsionUnits, isOnWater) {
                    var numberOfWheels = 0;
                    var numberOfPropelers = 0;
                    for (var i = 0; i < propulsionUnits.length; i++) {
                        if (propulsionUnits[i] instanceof Propeler) {
                            numberOfPropelers++;
                        }
                        else if (propulsionUnits[i] instanceof Wheel) {
                            numberOfWheels++;
                        }
                        else {
                            throw Error("The propulsionUnits array must contain only propelers and wheels!");
                        }
                    }
                    if (numberOfPropelers >= 1 && numberOfWheels >= 3) {
                        Vehicle.apply(this, arguments);
                    }
                    else {
                        throw Error("The propulsionUnits array must contain at least 3 wheels and 1 propeler!");
                    }
                    this.isOnWater = isOnWater;
                }

                AmphibiousVehicle.inherit(Vehicle);

                AmphibiousVehicle.prototype.accelerate = function () {
                    if (this.isOnWater) {
                        for (var i = 0; i < this.propulsionUnits.length; i++) {
                            if (this.propulsionUnits[i] instanceof Propeler) {
                                this.speed = this.speed + this.propulsionUnits[i].getAcceleration();
                            }
                        }
                    }
                    else {
                        for (var i = 0; i < this.propulsionUnits.length; i++) {
                            if (this.propulsionUnits[i] instanceof Wheel) {
                                this.speed = this.speed + this.propulsionUnits[i].getAcceleration();
                            }
                        }
                    }
                }

                AmphibiousVehicle.prototype.switchToLandMode = function () {
                    this.isOnWater = false;
                }

                AmphibiousVehicle.prototype.switchToWaterMode = function () {
                    this.isOnWater = true;
                }
            
                //Testing all
                var wheelArray = [new Wheel(20), new Wheel(20), new Wheel(20), new Wheel(20)];
                console.log("=====================");
                console.log("Wheel:");
                console.log("=====================");
                console.log("radius: " + wheelArray[0].radius);
                console.log("getAcceleration: " + wheelArray[0].getAcceleration());
                console.log("Check if it is a PropulsionUnit: " + (wheelArray[0] instanceof PropulsionUnit));

                console.log("=====================");
                console.log("Car:");
                console.log("=====================");
                var car = new LandVehicle(50, wheelArray);
                console.log("Before acceleration:");
                console.log("speed: " + car.speed);
                car.getAcceleration();
                console.log("After acceleration:");
                console.log("speed: " + car.speed);
                console.log("Check if it is a Vehicle: " + (car instanceof Vehicle));

                var propellingNozzleArray = [new PropellingNozzle(50, false)];
                console.log("=====================");
                console.log("PropellingNozzle:");
                console.log("=====================");
                console.log("power: " + propellingNozzleArray[0].power);
                console.log("acceleration: " + propellingNozzleArray[0].getAcceleration());
                console.log("Check if it is a PropulsionUnit: " + (propellingNozzleArray[0] instanceof PropulsionUnit));

                console.log("=====================");
                console.log("Aircraft:");
                console.log("=====================");
                var aircraft = new AirVehicle(200, propellingNozzleArray);
                console.log("Before acceleration:");
                console.log("speed: " + aircraft.speed);
                aircraft.getAcceleration();
                console.log("After acceleration:");
                console.log("speed: " + aircraft.speed);
                console.log("After switchAfterburnerOn and acceleration:");
                aircraft.switchAfterburnerOn();
                aircraft.getAcceleration();
                console.log("speed: " + aircraft.speed);
                console.log("Check if it is a Vehicle: " + (aircraft instanceof Vehicle));

                var propelerArray = [new Propeler(5, true), new Propeler(5, true)];
                console.log("=====================");
                console.log("Propeler:");
                console.log("=====================");
                console.log("numberOfFins: " + propelerArray[0].numberOfFins);
                console.log("acceleration: " + propelerArray[0].getAcceleration());
                console.log("Check if it is a PropulsionUnit: " + (propelerArray[0] instanceof PropulsionUnit));

                console.log("Watercraft:");
                var watercraft = new WaterVehicle(50, propelerArray, 2);
                console.log("Before acceleration:");
                console.log("speed: " + watercraft.speed);
                watercraft.getAcceleration();
                console.log("After acceleration:");
                console.log("speed: " + watercraft.speed);
                console.log("After set the spinDirection to counter-clockwise and acceleration:");
                watercraft.setSpinDirectionToCounterClockwise();
                watercraft.getAcceleration();
                console.log("speed: " + watercraft.speed);
                console.log("Check if it is a Vehicle: " + (watercraft instanceof Vehicle));

                var amphibiaPropulsionUnits = [new Propeler(5, true), new Wheel(20), new Wheel(20), new Wheel(20)];
                console.log("=====================");
                console.log("Ampibia:");
                console.log("=====================");
                var amphibia = new AmphibiousVehicle(30, amphibiaPropulsionUnits, true);
                console.log("Is on water mode: " + amphibia.isOnWater);
                console.log("Before acceleration:");
                console.log("speed: " + amphibia.speed);
                amphibia.getAcceleration();
                console.log("After acceleration:");
                console.log("speed: " + amphibia.speed);
                console.log("After switching to land mode and acceleration:");
                amphibia.switchToLandMode();
                amphibia.getAcceleration();
                console.log("Is on water mode: " + amphibia.isOnWater);
                console.log("speed: " + amphibia.speed);
                console.log("Check if it is a Vehicle: " + (amphibia instanceof Vehicle));
            
            })();
        </script>

    </body>   
</html>