<!--Create a module for working with DOM. The module should have the following functionality:
        ☻1☻Add DOM element to parent element given by selector
        ☻2☻Remove element from the DOM  by given selector
        ☻3☻Attach event to given selector by given event type and event hander
        ☻4☻Add elements to buffer, which appends them to the 
            DOM when their count for some selector becomes 100
        ☻5☻The buffer contains elements for each selector it gets
        ☻6☻Get elements by CSS selector
        ☻7☻The module should reveal only the methods-->
<!DOCTYPE html>
<html>
<head>
    <title>Module For Working With DOM</title>
</head>
<body>
    <a href="#" class="button">Click me!</a>
    <style>
        div {
            height:20px;
            width: 20px;
            background-color:green;
            margin:5px;
        }
    </style>
    <script>
        var domModule = (function () {
            var buffer = [];

            /*☻1☻Add DOM element to parent element given by selector*/
            function appendChild(elementToAdd, selector) {
                var parentElement = document.querySelector(selector);
                var newElement = document.createElement(elementToAdd);
                parentElement.appendChild(newElement);
            }

            /*☻2☻Remove element from the DOM  by given selector*/
            function removeChild(parentSelector, removeSelector) {
                var parentsList = document.querySelectorAll(parentSelector);
                for (var i = 0; i < parentsList.length; i++) {
                    var elementToRemove = parentsList[i].querySelector(removeSelector);
                    parentsList[i].removeChild(elementToRemove);
                }
            }

            /*☻3☻Attach event to given selector by given event type and event hander*/
            function addHandler(elementSelector, eventType, callback) {
                var elements = document.querySelectorAll(elementSelector);
                for (var i = 0; i < elements.length; i++) {
                    elements[i].addEventListener(eventType, callback, false);
                }
            }

            /*☻4☻Add elements to buffer, which appends them to the 
             DOM when their count for some selector becomes 100*/
            function bufferElement(parentElement, ellementToAdd) {
                this.parentElement = parentElement;
                this.ellementToAdd = ellementToAdd;
            }
            function appendBufferToDom() {
                for (var i = 0; i < buffer.length; i++) {
                    buffer[i].parentElement.appendChild(buffer[i].ellementToAdd);
                }
                buffer = [];
            }
            function appendToBuffer(parentSelector, newElement) {
                var parentElement = document.querySelector(parentSelector);
                var elementToAdd = document.createElement(newElement);
                buffer.push(new bufferElement(parentElement, elementToAdd));
                if (buffer.length >= 100) {
                    appendBufferToDom();
                }
            }


            return {
                appendChild: appendChild,
                removeChild: removeChild,
                addHandler: addHandler,
                appendToBuffer: appendToBuffer
            };
        })();

        (function () {
            domModule.appendChild("div", "body");
            alert("Div is on screen!");
            domModule.removeChild("body", "div");
            alert("Div is removed!");
            domModule.addHandler("a", "click", function () {alert('Thanks for the click!')});
            for (var i = 1; i <= 101; i++) {
                domModule.appendToBuffer("body", "div");
            }
            alert("101 divs added!");
        }());
    </script>
</html>